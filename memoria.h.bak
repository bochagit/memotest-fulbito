/**
 * @file memoria.h
 * @brief Módulo del juego de la memoria (lógica y renderizado básico)
 */

#ifndef MEMORIA_H_INCLUDED
#define MEMORIA_H_INCLUDED

#include "errores.h"
#include <SDL2/SDL.h>
#include <stdint.h>

typedef struct sMemoria tMemoria;

/**
 * Crea e inicializa el juego de memoria.
 * filas x columnas debe ser par y corresponder a 6,8 o 10 pares según la configuración.
 * rutaSet es el prefijo/nombre de los ficheros de imágenes (por ejemplo "img/pareja").
 */
tMemoria* memoria_crear(SDL_Renderer *renderer, int filas, int columnas, const char *rutaSet, int usarSonidos);

/** Libera recursos del juego de memoria. */
void memoria_destruir(tMemoria *m);

/** Procesa un evento (mouse/teclado) relacionado con la partida. */
tError memoria_procesar_evento(tMemoria *m, const SDL_Event *ev);

/** Actualiza la lógica interna (manejo de retardos tras segunda selección). */
void memoria_actualizar(tMemoria *m, uint32_t deltaMs);

/** Renderiza el tablero de cartas. */
void memoria_renderizar(tMemoria *m, SDL_Renderer *renderer);

/** Obtiene estadísticas: puntos, aciertos, intentos, racha actual. */
void memoria_obtener_estadisticas(tMemoria *m, int *puntos, int *aciertos, int *intentos, int *racha);

#endif // MEMORIA_H_INCLUDED
